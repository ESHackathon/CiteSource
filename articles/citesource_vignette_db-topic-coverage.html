<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CiteSource">
<title>CiteSource - Example: Comparing Database Topic Coverage • CiteSource</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CiteSource - Example: Comparing Database Topic Coverage">
<meta property="og:description" content="CiteSource">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CiteSource</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/citesource_benchmark_testing.html">CiteSource - Example: Benchmark Testing</a>
    <a class="dropdown-item" href="../articles/citesource_example.html">CiteSource - Example workflow</a>
    <a class="dropdown-item" href="../articles/citesource_vignette.html">CiteSource</a>
    <a class="dropdown-item" href="../articles/citesource_vignette_db-pre-screen_validation.html">CiteSource - Example: Validating Usefullness of Databases Pre-Screening</a>
    <a class="dropdown-item" href="../articles/citesource_vignette_db-topic-coverage.html">CiteSource - Example: Comparing Database Topic Coverage</a>
    <a class="dropdown-item" href="../articles/citesource_working_example.html">CiteSource - Short working example</a>
    <a class="dropdown-item" href="../articles/citesource_working_example_long.html">CiteSource - Long working example</a>
    <a class="dropdown-item" href="../articles/kh_example.html">CiteSource - Example workflow KH</a>
    <a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ESHackathon/CiteSource/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CiteSource - Example: Comparing Database Topic Coverage</h1>
                        <h4 data-toc-skip class="author"></h4>
            
            <h4 data-toc-skip class="date">2023-01-26</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ESHackathon/CiteSource/blob/HEAD/vignettes/citesource_vignette_db-topic-coverage.Rmd" class="external-link"><code>vignettes/citesource_vignette_db-topic-coverage.Rmd</code></a></small>
      <div class="d-none name"><code>citesource_vignette_db-topic-coverage.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="about-the-package">About the package<a class="anchor" aria-label="anchor" href="#about-the-package"></a>
</h2>
<p>CiteSource provides users with the ability to deduplicate references
while maintaining customizable metadata. Instead of the traditional
deduplication method where records are removed and only one record is
selected to be retained, CiteSource retains each duplicate record while
merging metadata into a single main record. This main record maintains
user-customized metadata in three fields, “cite_source”, “cite_label”
and “tag_naming”. In the merging process, select metadata fields are
also automatically compared (currently DOI &amp; Abstract) and the most
complete metadata is used in the main record.</p>
</div>
<div class="section level2">
<h2 id="about-this-vignette">About this vignette<a class="anchor" aria-label="anchor" href="#about-this-vignette"></a>
</h2>
<p>CiteSource can be used to examine topical overlap between databases.
In this example, we are interested in the overlap among databases, both
multi-disciplinary and subject-specific, for the literature on the
harmful effects of gambling addiction. To assess this, we ran a very
specific search for the term “gambling harm*” in the title and abstract
fields of the following databases: Lens, Scopus, Criminal Justice
Abstracts, PsycInfo and Medline.</p>
</div>
<div class="section level2">
<h2 id="installation-of-packages-and-loading-libraries">1. Installation of packages and loading libraries<a class="anchor" aria-label="anchor" href="#installation-of-packages-and-loading-libraries"></a>
</h2>
<p>Use the following code to install CiteSource. Currently, CiteSource
lives on GitHub, so you may need to first install the remotes package.
This vignette also uses functions from the ggplot2 and dplyr
packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the remotes packages to enable installation from GitHub</span></span>
<span><span class="co"># install.packages("remotes")</span></span>
<span><span class="co"># library(remotes)</span></span>
<span></span>
<span><span class="co"># Install CiteSource</span></span>
<span><span class="co"># remotes::install_github("ESHackathon/CiteSource")</span></span>
<span></span>
<span><span class="co"># Load the necessary libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.eshackathon.org/CiteSource/" class="external-link">CiteSource</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="import-files-from-multiple-sources">Import files from multiple sources<a class="anchor" aria-label="anchor" href="#import-files-from-multiple-sources"></a>
</h2>
<p>Users can import multiple RIS or bibtex files into CiteSource, which
the user can label with source information such as database or
platform.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import citation files from folder</span></span>
<span><span class="va">citation_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"topic_data"</span>, pattern <span class="op">=</span> <span class="st">"\\.ris"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read in citations and specify sources. Note that labels and strings are not relevant for this use case.</span></span>
<span><span class="va">citations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_citations.html">read_citations</a></span><span class="op">(</span><span class="va">citation_files</span>,</span>
<span>  cite_sources <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"crimjust"</span>, <span class="st">"lens"</span>, <span class="st">"psycinfo"</span>, <span class="st">"pubmed"</span>, <span class="st">"scopus"</span><span class="op">)</span>,</span>
<span>  tag_naming <span class="op">=</span> <span class="st">"best_guess"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Import completed - with the following details:</span></span>
<span><span class="co">#&gt;                                       file cite_source cite_string cite_label</span></span>
<span><span class="co">#&gt; 1  20221207_gambling-harms_crimjust_41.ris    crimjust        &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2      20221207_gambling-harms_lens_49.ris        lens        &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3 20221207_gambling-harms_psycinfo_124.ris    psycinfo        &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4   20221207_gambling-harms_pubmed_176.ris      pubmed        &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5   20221207_gambling-harms_scopus_255.ris      scopus        &lt;NA&gt;       &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   citations</span></span>
<span><span class="co">#&gt; 1        41</span></span>
<span><span class="co">#&gt; 2        49</span></span>
<span><span class="co">#&gt; 3       124</span></span>
<span><span class="co">#&gt; 4       176</span></span>
<span><span class="co">#&gt; 5       255</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="deduplication-and-source-information">Deduplication and source information<a class="anchor" aria-label="anchor" href="#deduplication-and-source-information"></a>
</h2>
<p>CiteSource allows users to merge duplicates while maintaining
information in the cite_source metadata field. Thus, information about
the origin of the records is not lost in the deduplication process. The
next few steps produce the dataframes that we can use in subsequent
analyses.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Deduplicate citations</span></span>
<span><span class="va">dedup_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dedup_citations.html">dedup_citations</a></span><span class="op">(</span><span class="va">citations</span>, merge_citations <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get unique citations. This yields a dataframe of all records with duplicates merged, but the originating source information maintained in a new variable called cite_source.</span></span>
<span><span class="va">unique_citations</span> <span class="op">&lt;-</span> <span class="va">dedup_results</span><span class="op">$</span><span class="va">unique</span></span>
<span></span>
<span><span class="co"># Count number of unique and non-unique citations from different sources and labels.</span></span>
<span><span class="va">n_unique</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/count_unique.html">count_unique</a></span><span class="op">(</span><span class="va">unique_citations</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For each unique citation, determine which sources were present</span></span>
<span><span class="va">source_comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compare_sources.html">compare_sources</a></span><span class="op">(</span><span class="va">unique_citations</span>, comp_type <span class="op">=</span> <span class="st">"sources"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="plot-heatmap-to-compare-source-overlap">Plot heatmap to compare source overlap<a class="anchor" aria-label="anchor" href="#plot-heatmap-to-compare-source-overlap"></a>
</h2>
<div class="section level3">
<h3 id="heatmap-by-number-of-records">Heatmap by number of records<a class="anchor" aria-label="anchor" href="#heatmap-by-number-of-records"></a>
</h3>
<p>A heatmap can tell us the total number of records retrieved from each
database, and can be used to compare the number of overlapping records
found in each pair of databases. In this example, we can see that Scopus
yielded the highest number of records on gambling harms, and Criminal
Justics Abstracts the least.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate source comparison heatmap</span></span>
<span><span class="fu"><a href="../reference/plot_source_overlap_heatmap.html">plot_source_overlap_heatmap</a></span><span class="op">(</span><span class="va">source_comparison</span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="heatmap-by-percentage-of-records">Heatmap by percentage of records<a class="anchor" aria-label="anchor" href="#heatmap-by-percentage-of-records"></a>
</h3>
<p>Another way of visualizing this is a heatmap with percent overlap. We
can use the <code>plot_type</code> argument to produce a percentage
heatmap as follows. The total number of records appears in gray. The
percentages indicate the share of records in a row also found in a
column. For example, here we see that 67% of the records in Scopus were
also found in PubMed. Conversely, 97% of records in PubMed were found in
Scopus.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate heatmap with percent overlap</span></span>
<span><span class="fu"><a href="../reference/plot_source_overlap_heatmap.html">plot_source_overlap_heatmap</a></span><span class="op">(</span><span class="va">source_comparison</span>, plot_type <span class="op">=</span> <span class="st">"percentages"</span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
</div>
</div>
<div class="section level2">
<h2 id="plot-an-upset-plot-to-compare-source-overlap">Plot an upset plot to compare source overlap<a class="anchor" aria-label="anchor" href="#plot-an-upset-plot-to-compare-source-overlap"></a>
</h2>
<p>An upset plot is another way of visualizing overlap and provides a
bit more detail about the number of shared and unique records. Here, we
can see that Scopus had the most unique records not found in any other
database (n=35), and Criminal Justice Abstracts only had one unique
record. Six records were found in every database.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate a source comparison upset plot.</span></span>
<span><span class="fu"><a href="../reference/plot_source_overlap_upset.html">plot_source_overlap_upset</a></span><span class="op">(</span><span class="va">source_comparison</span>, decreasing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="bar-plots-of-unique-and-shared-records">Bar plots of unique and shared records<a class="anchor" aria-label="anchor" href="#bar-plots-of-unique-and-shared-records"></a>
</h2>
<div class="section level3">
<h3 id="bar-plot-of-numbers-of-records">Bar plot of numbers of records<a class="anchor" aria-label="anchor" href="#bar-plot-of-numbers-of-records"></a>
</h3>
<p>Bar plots can be another way of looking at overlap and uniqueness of
database contributions to a topic. We can use the
<code>plot_contributions</code> function to produce a bar plot, and then
use any <code>ggplot2</code> functions to format it further.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate bar plot of unique citations PER database as NUMBER</span></span>
<span><span class="fu"><a href="../reference/plot_contributions.html">plot_contributions</a></span><span class="op">(</span><span class="va">n_unique</span>, bars <span class="op">=</span> <span class="va">cite_source</span>, facets <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, fill <span class="op">=</span> <span class="st">""</span>, title <span class="op">=</span> <span class="st">"Contribution by source"</span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-7-1.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="bar-plot-of-percentages-of-records">Bar plot of percentages of records<a class="anchor" aria-label="anchor" href="#bar-plot-of-percentages-of-records"></a>
</h3>
<p>We can also look at proportions. Interestingly, Lens seems to have
the greatest proportion of unique records on gambling harms.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Starting from the plot_contributions function</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_contributions.html">plot_contributions</a></span><span class="op">(</span><span class="va">n_unique</span>, bars <span class="op">=</span> <span class="va">cite_source</span>, facets <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reset plot layers</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">layers</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># Use ggplot to make plot adjustments</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-8-1.png" width="576"></p>
</div>
<div class="section level3">
<h3 id="bar-plot-with-labels">Bar plot with labels<a class="anchor" aria-label="anchor" href="#bar-plot-with-labels"></a>
</h3>
<p>And one more option: a labeled bar plot with dodged bars. This is
useful if we have very small numbers of unique records compared to the
overall number of records.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate dodged bar plot Unique/Crossover PER Source with labels</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_contributions.html">plot_contributions</a></span><span class="op">(</span><span class="va">n_unique</span>, bars <span class="op">=</span> <span class="va">cite_source</span>, facets <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reset plot layers</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">layers</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># Use ggplot to make plot adjustments</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Number of citations"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"count"</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
</div>
</div>
<div class="section level2">
<h2 id="analyzing-unique-contributions">Analyzing unique contributions<a class="anchor" aria-label="anchor" href="#analyzing-unique-contributions"></a>
</h2>
<p>When we’re trying to get a sense of relative database coverage for a
particular topic, in other words what a database contributes to a search
on a topic compared to other databases, we might want to look more
closely at the records that are only found in that database and not
appearing anywhere else. We can again make use of the output of the
<code>count_unique</code> function, this time also requesting the full
references. We use the <em>dplyr</em> function <code>filter</code> to
find the unique records contributed by single sources.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get unique records from each source with bibliographic data</span></span>
<span></span>
<span><span class="va">unique_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/count_unique.html">count_unique</a></span><span class="op">(</span><span class="va">unique_citations</span>, include_references <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">unique</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write this dataframe to a csv file to examine the various titles contributed uniquely by each source.</span></span>
<span></span>
<span><span class="co">#write.csv(unique_records, "unique_records.csv")</span></span>
<span></span>
<span><span class="co"># Print table of unique records by source</span></span>
<span><span class="va">unique_records</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">cite_source</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   cite_source     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> crimjust        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> lens           12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> psycinfo        5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> pubmed          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> scopus         35</span></span></code></pre></div>
<div class="section level3">
<h3 id="analyze-journal-titles">Analyze journal titles<a class="anchor" aria-label="anchor" href="#analyze-journal-titles"></a>
</h3>
<p>Now we can take a deeper dive into the unique records contributed by
each source. For example, let’s look at the top journal titles in Scopus
that produced unique records on gambling harms not found in any other
database.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Analyze journal titles for unique records</span></span>
<span><span class="va">scopus_journals</span> <span class="op">&lt;-</span> <span class="va">unique_records</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cite_source</span> <span class="op">==</span> <span class="st">"scopus"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">journal</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use the knitr:kable function to print a nice looking table of the top 10 journals</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">scopus_journals</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="93%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">journal</th>
<th align="right">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">International Gambling Studies</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">Current Addiction Reports</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">International Journal of Mental Health and
Addiction</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Journal of Gambling Issues</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Computers in Human Behavior</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Journal of Public Health (Germany)</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">Applied Research in Quality of Life</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Canadian Journal of Addiction</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">Cognition and Addiction: A Researcher’s Guide from
Mechanisms Towards Interventions</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">Critical Public Health</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="analyze-publication-years">Analyze publication years<a class="anchor" aria-label="anchor" href="#analyze-publication-years"></a>
</h2>
<p>We may also want to look at publication years of unique records. For
example, perhaps one databases coverage is better for earlier research.
Let’s look at the publication years of the 35 unique records from
Scopus. We can see these are mostly very recent records, which may
indicate a more up-to-date and current collection on gambling harms in
the Scopus database.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Group by year, count and produced a line graph</span></span>
<span><span class="va">unique_records</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cite_source</span> <span class="op">==</span> <span class="st">"scopus"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">count</span>, group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Publication year"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Unique records"</span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
<p>We can also compare publication years of unique records across each
database by using the <code>facet_wrap</code> feature of
<em>ggplot</em>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Group by year and source, count and produced a faceted line graph</span></span>
<span><span class="va">unique_records</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cite_source</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">count</span>, group <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">cite_source</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Publication year"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Unique records"</span><span class="op">)</span></span></code></pre></div>
<p><img src="citesource_vignette_db-topic-coverage_files/figure-html/unnamed-chunk-13-1.png" width="576"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Trevor Riley, Kaitlyn Hair, Lukas Wallrich, Matthew Grainger, Sarah Young, Chris Pritchard, Neal Haddaway.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
