<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Detailed Record Counts — calculate_detailed_records • CiteSource</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Detailed Record Counts — calculate_detailed_records"><meta name="description" content="This function processes a dataset and expands the 'cite_source' column, filters on
user-specified labels (if provided), and calculates detailed counts such as the records imported,
distinct records, unique records, non-unique records, and several percentage contributions for
each citation source/method it also adds a total row summarizing these counts."><meta property="og:description" content="This function processes a dataset and expands the 'cite_source' column, filters on
user-specified labels (if provided), and calculates detailed counts such as the records imported,
distinct records, unique records, non-unique records, and several percentage contributions for
each citation source/method it also adds a total row summarizing these counts."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CiteSource</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/citesource_working_example.html">Source Analysis Across Screening Phases</a></li>
    <li><a class="dropdown-item" href="../articles/citesource_benchmark_testing.html">Benchmark Testing</a></li>
    <li><a class="dropdown-item" href="../articles/citesource_new_benchmark_testing.html">New Benchmark Testing</a></li>
    <li><a class="dropdown-item" href="../articles/citesource_vignette_db-pre-screen_validation.html">Assessing Usefulness of Databases for Evidence Synthesis</a></li>
    <li><a class="dropdown-item" href="../articles/citesource_vignette_db-topic-coverage.html">Comparing Database Topic Coverage</a></li>
    <li><a class="dropdown-item" href="../articles/citesource_analysis_across_screening_phases.html">Analysis Across Screening Phases</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ESHackathon/CiteSource/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate Detailed Record Counts</h1>
      <small class="dont-index">Source: <a href="https://github.com/ESHackathon/CiteSource/blob/DrMattG-patch-1/R/new_count_and_table.R" class="external-link"><code>R/new_count_and_table.R</code></a></small>
      <div class="d-none name"><code>calculate_detailed_records.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function processes a dataset and expands the 'cite_source' column, filters on
user-specified labels (if provided), and calculates detailed counts such as the records imported,
distinct records, unique records, non-unique records, and several percentage contributions for
each citation source/method it also adds a total row summarizing these counts.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calculate_detailed_records</span><span class="op">(</span></span>
<span>  <span class="va">unique_citations</span>,</span>
<span>  <span class="va">n_unique</span>,</span>
<span>  labels_to_include <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-unique-citations">unique_citations<a class="anchor" aria-label="anchor" href="#arg-unique-citations"></a></dt>
<dd><p>A data frame containing unique citations.
The data frame must include the columns <code>cite_source</code>, <code>cite_label</code>, and <code>duplicate_id</code>.</p></dd>


<dt id="arg-n-unique">n_unique<a class="anchor" aria-label="anchor" href="#arg-n-unique"></a></dt>
<dd><p>A data frame containing counts of unique records, typically filtered
by specific criteria (e.g., <code>cite_label == "search"</code>).</p></dd>


<dt id="arg-labels-to-include">labels_to_include<a class="anchor" aria-label="anchor" href="#arg-labels-to-include"></a></dt>
<dd><p>An optional character vector of labels to filter the citations.
If provided, only citations matching these labels will be included in the counts.
if 'NULL' all labels are included. Default is 'NULL'.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with detailed counts for each citation source, including:</p><ul><li><p><code>Records Imported</code>: Total number of records imported.</p></li>
<li><p><code>Distinct Records</code>: Number of distinct records after deduplication.</p></li>
<li><p><code>Unique Records</code>: Number of unique records specific to a source.</p></li>
<li><p><code>Non-unique Records</code>: Number of records found in other sources.</p></li>
<li><p><code>Source Contribution %</code>: Percentage contribution of each source to the total distinct records.</p></li>
<li><p><code>Source Unique Contribution %</code>: Percentage contribution of each source to the total unique records.</p></li>
<li><p><code>Source Unique %</code>: Percentage of unique records within the distinct records for each source.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function first checks if the required columns are present in the input data frames.
It then expands the <code>cite_source</code> column, filters the data based on the provided labels (if any),
and calculates various counts and percentages for each citation source. The function also adds
a total row summarizing these counts across all sources.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example usage with a sample dataset</span></span></span>
<span class="r-in"><span><span class="va">unique_citations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  cite_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Source1, Source2"</span>, <span class="st">"Source2"</span>, <span class="st">"Source3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cite_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Label1"</span>, <span class="st">"Label2"</span>, <span class="st">"Label1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  duplicate_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n_unique</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  cite_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Source1"</span>, <span class="st">"Source2"</span>, <span class="st">"Source3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cite_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"search"</span>, <span class="st">"search"</span>, <span class="st">"search"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  unique <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">calculate_detailed_records</span><span class="op">(</span><span class="va">unique_citations</span>, <span class="va">n_unique</span>, labels_to_include <span class="op">=</span> <span class="st">"search"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] Source             Records.Imported   Distinct.Records   Unique.Records    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] Non.unique.Records</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;0 rows&gt; (or 0-length row.names)</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Trevor Riley, Kaitlyn Hair, Lukas Wallrich, Matthew Grainger, Sarah Young, Chris Pritchard, Neal Haddaway.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

