% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/new_count_and_table.R
\name{calculate_detailed_record_counts}
\alias{calculate_detailed_record_counts}
\title{Calculate Detailed Record Counts}
\usage{
calculate_detailed_record_counts(
  unique_citations,
  n_unique,
  labels_to_include = NULL
)
}
\arguments{
\item{unique_citations}{A data frame containing unique citations.
The data frame must include the columns \code{cite_source}, \code{cite_label}, and \code{duplicate_id}.}

\item{n_unique}{A data frame containing counts of unique records, typically filtered
by specific criteria (e.g., \code{cite_label == "search"}).}

\item{labels_to_include}{An optional character vector of labels to filter the citations.
If provided, only citations matching these labels will be included in the counts.
Default is NULL, meaning no filtering will be applied.}
}
\value{
A data frame with detailed counts for each citation source, including:
\itemize{
\item \verb{Records Imported}: Total number of records imported.
\item \verb{Distinct Records}: Number of distinct records after deduplication.
\item \verb{Unique records}: Number of unique records specific to a source.
\item \verb{Non-unique Records}: Number of records found in other sources.
\item \verb{Source Contribution \%}: Percentage contribution of each source to the total distinct records.
\item \verb{Source Unique Contribution \%}: Percentage contribution of each source to the total unique records.
\item \verb{Source Unique \%}: Percentage of unique records within the distinct records for each source.
}
}
\description{
This function calculates detailed record counts from unique citations, including
the number of records imported, distinct records, unique records, and non-unique records
for each citation source. It also calculates contribution percentages for each source.
}
\details{
The function first checks if the required columns are present in the input data frames.
It then expands the \code{cite_source} column, filters the data based on the provided labels (if any),
and calculates various counts and percentages for each citation source. The function also adds
a total row summarizing these counts across all sources.
}
\examples{
# Example usage with a sample dataset
citations <- data.frame(
  cite_source = c("Source1, Source2", "Source1", "Source3"),
  cite_label = c("Label1", "Label2", "Label3"),
  duplicate_id = c(1, 2, 3)
)
n_unique <- data.frame(
  cite_source = c("Source1", "Source2", "Source3"),
  unique = c(10, 20, 30)
)
calculate_detailed_record_counts(citations, n_unique)
}
